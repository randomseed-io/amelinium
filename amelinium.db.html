<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>amelinium.db documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script><link rel="stylesheet" type="text/css" href="css/randomseed.css" /></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Amelinium</span> <span class="project-version">1.0.0</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="10_introduction.html"><div class="inner"><span>Introduction</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><a href="amelinium.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>amelinium</span></div></a></li><li class="depth-2 branch"><a href="amelinium.api.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>api</span></div></a></li><li class="depth-2"><a href="amelinium.auth.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>auth</span></div></a></li><li class="depth-3"><a href="amelinium.auth.specs.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>specs</span></div></a></li><li class="depth-2"><a href="amelinium.common.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>common</span></div></a></li><li class="depth-3"><a href="amelinium.common.oplog.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>oplog</span></div></a></li><li class="depth-4"><a href="amelinium.common.oplog.auth.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>auth</span></div></a></li><li class="depth-3 branch"><a href="amelinium.common.populators.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>populators</span></div></a></li><li class="depth-3"><a href="amelinium.common.swagger.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>swagger</span></div></a></li><li class="depth-2 branch"><a href="amelinium.core.html"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch current"><a href="amelinium.db.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>db</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>http</span></div></div></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>client</span></div></div></li><li class="depth-4"><a href="amelinium.http.client.twilio.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>twilio</span></div></a></li><li class="depth-3"><a href="amelinium.http.middleware.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>middleware</span></div></a></li><li class="depth-4 branch"><a href="amelinium.http.middleware.coercion.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>coercion</span></div></a></li><li class="depth-4 branch"><a href="amelinium.http.middleware.content.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>content</span></div></a></li><li class="depth-4 branch"><a href="amelinium.http.middleware.db.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>db</span></div></a></li><li class="depth-4 branch"><a href="amelinium.http.middleware.debug.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>debug</span></div></a></li><li class="depth-4 branch"><a href="amelinium.http.middleware.format.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>format</span></div></a></li><li class="depth-4 branch"><a href="amelinium.http.middleware.headers.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>headers</span></div></a></li><li class="depth-4 branch"><a href="amelinium.http.middleware.language.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>language</span></div></a></li><li class="depth-4 branch"><a href="amelinium.http.middleware.lazy-req.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>lazy-req</span></div></a></li><li class="depth-4 branch"><a href="amelinium.http.middleware.populators.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>populators</span></div></a></li><li class="depth-4 branch"><a href="amelinium.http.middleware.remote-ip.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>remote-ip</span></div></a></li><li class="depth-4 branch"><a href="amelinium.http.middleware.roles.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>roles</span></div></a></li><li class="depth-4 branch"><a href="amelinium.http.middleware.session.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>session</span></div></a></li><li class="depth-4"><a href="amelinium.http.middleware.validators.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>validators</span></div></a></li><li class="depth-3"><a href="amelinium.http.server.html"><div class="inner"><span class="tree" style="top: -424px;"><span class="top" style="height: 433px;"></span><span class="bottom"></span></span><span>server</span></div></a></li><li class="depth-4 branch"><a href="amelinium.http.server.jetty.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>jetty</span></div></a></li><li class="depth-4"><a href="amelinium.http.server.undertow.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>undertow</span></div></a></li><li class="depth-2"><a href="amelinium.i18n.html"><div class="inner"><span class="tree" style="top: -610px;"><span class="top" style="height: 619px;"></span><span class="bottom"></span></span><span>i18n</span></div></a></li><li class="depth-3"><a href="amelinium.i18n.pluralizers.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pluralizers</span></div></a></li><li class="depth-2 branch"><a href="amelinium.locale.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>locale</span></div></a></li><li class="depth-2 branch"><a href="amelinium.logging.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>logging</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>proto</span></div></div></li><li class="depth-3 branch"><a href="amelinium.proto.auth.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>auth</span></div></a></li><li class="depth-3"><a href="amelinium.proto.session.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>session</span></div></a></li><li class="depth-2 branch"><a href="amelinium.schemas.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>schemas</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>server</span></div></div></li><li class="depth-3"><a href="amelinium.server.ssl.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ssl</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>types</span></div></div></li><li class="depth-3 branch"><a href="amelinium.types.auth.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>auth</span></div></a></li><li class="depth-3 branch"><a href="amelinium.types.db.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>db</span></div></a></li><li class="depth-3 branch"><a href="amelinium.types.errors.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>errors</span></div></a></li><li class="depth-3"><a href="amelinium.types.session.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>session</span></div></a></li><li class="depth-2"><a href="amelinium.web.html"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>web</span></div></a></li><li class="depth-3"><a href="amelinium.web.taggers.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>taggers</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="amelinium.db.html#var-as-uuid"><div class="inner"><span>as-uuid</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-auth"><div class="inner"><span>auth</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-braced-.3F"><div class="inner"><span>braced-?</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-braced-join-.3F"><div class="inner"><span>braced-join-?</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-braced-join-col-names"><div class="inner"><span>braced-join-col-names</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-braced-join-col-names-no-conv"><div class="inner"><span>braced-join-col-names-no-conv</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-cache-create"><div class="inner"><span>cache-create</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-cache-evict.21"><div class="inner"><span>cache-evict!</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-cache-lookup"><div class="inner"><span>cache-lookup</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-cache-lookup-coll"><div class="inner"><span>cache-lookup-coll</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-cache-lookup-email"><div class="inner"><span>cache-lookup-email</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-cache-lookup-emails"><div class="inner"><span>cache-lookup-emails</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-cache-lookup-uuid"><div class="inner"><span>cache-lookup-uuid</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-cache-lookup-uuids"><div class="inner"><span>cache-lookup-uuids</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-cache-prepare"><div class="inner"><span>cache-prepare</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-cached-setting-del"><div class="inner"><span>cached-setting-del</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-cached-setting-get"><div class="inner"><span>cached-setting-get</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-cached-setting-set"><div class="inner"><span>cached-setting-set</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-caches"><div class="inner"><span>caches</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-close.21"><div class="inner"><span>close!</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-close-db"><div class="inner"><span>close-db</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-close-mig"><div class="inner"><span>close-mig</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-close-pool"><div class="inner"><span>close-pool</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-data-source.3F"><div class="inner"><span>data-source?</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-db-config.3F"><div class="inner"><span>db-config?</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-db-key-name"><div class="inner"><span>db-key-name</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-db-name"><div class="inner"><span>db-name</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-dbname-finder"><div class="inner"><span>dbname-finder</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-dbname-key-finder"><div class="inner"><span>dbname-key-finder</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-default-reporter"><div class="inner"><span>default-reporter</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-ds"><div class="inner"><span>ds</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-email-to-id"><div class="inner"><span>email-to-id</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-emails-to-ids"><div class="inner"><span>emails-to-ids</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-for-insert-multi-or"><div class="inner"><span>for-insert-multi-or</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-for-insert-or"><div class="inner"><span>for-insert-or</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-for-replace"><div class="inner"><span>for-replace</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-for-replace-multi"><div class="inner"><span>for-replace-multi</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-get-cached"><div class="inner"><span>get-cached</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-get-cached-coll"><div class="inner"><span>get-cached-coll</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-get-cached-coll-prop"><div class="inner"><span>get-cached-coll-prop</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-get-cached-prop"><div class="inner"><span>get-cached-prop</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-get-cached-prop-or-default"><div class="inner"><span>get-cached-prop-or-default</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-get-failed.3F"><div class="inner"><span>get-failed?</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-get-id"><div class="inner"><span>get-id</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-get-id-by-email"><div class="inner"><span>get-id-by-email</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-get-id-by-uid"><div class="inner"><span>get-id-by-uid</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-get-ids"><div class="inner"><span>get-ids</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-get-ids-by-emails"><div class="inner"><span>get-ids-by-emails</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-get-ids-by-uids"><div class="inner"><span>get-ids-by-uids</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-id-from-db"><div class="inner"><span>id-from-db</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-id-to-db"><div class="inner"><span>id-to-db</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-init-cache"><div class="inner"><span>init-cache</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-init-caches"><div class="inner"><span>init-caches</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-init-db"><div class="inner"><span>init-db</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-init-mig"><div class="inner"><span>init-mig</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-init-migrators"><div class="inner"><span>init-migrators</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-insert-multi-or.21"><div class="inner"><span>insert-multi-or!</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-insert-or.21"><div class="inner"><span>insert-or!</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-insert-or-ignore.21"><div class="inner"><span>insert-or-ignore!</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-insert-or-ignore-multi.21"><div class="inner"><span>insert-or-ignore-multi!</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-insert-or-replace.21"><div class="inner"><span>insert-or-replace!</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-insert-or-replace-multi.21"><div class="inner"><span>insert-or-replace-multi!</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-invalidate.21"><div class="inner"><span>invalidate!</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-invalidator"><div class="inner"><span>invalidator</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-join-.3F"><div class="inner"><span>join-?</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-join-col-names"><div class="inner"><span>join-col-names</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-join-v.3D.3F"><div class="inner"><span>join-v=?</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-key-as-ip"><div class="inner"><span>key-as-ip</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-key-as-keyword"><div class="inner"><span>key-as-keyword</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-key-as-phone"><div class="inner"><span>key-as-phone</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-key-as-uuid"><div class="inner"><span>key-as-uuid</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-list-caches"><div class="inner"><span>list-caches</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-make-deleter"><div class="inner"><span>make-deleter</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-make-getter"><div class="inner"><span>make-getter</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-make-getter-coll"><div class="inner"><span>make-getter-coll</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-make-setter"><div class="inner"><span>make-setter</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-make-setting-deleter"><div class="inner"><span>make-setting-deleter</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-make-setting-getter"><div class="inner"><span>make-setting-getter</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-make-setting-setter"><div class="inner"><span>make-setting-setter</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-mem-assoc-existing.21"><div class="inner"><span>mem-assoc-existing!</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-memoize"><div class="inner"><span>memoize</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-memoizer"><div class="inner"><span>memoizer</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-migrate.21"><div class="inner"><span>migrate!</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-migration"><div class="inner"><span>migration</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-migration-databases"><div class="inner"><span>migration-databases</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-migration-index"><div class="inner"><span>migration-index</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-migrations"><div class="inner"><span>migrations</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-migrator-config"><div class="inner"><span>migrator-config</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-migrators"><div class="inner"><span>migrators</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-opts-map"><div class="inner"><span>opts-map</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-opts-simple-map"><div class="inner"><span>opts-simple-map</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-opts-simple-vec"><div class="inner"><span>opts-simple-vec</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-opts-slashed-map"><div class="inner"><span>opts-slashed-map</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-opts-slashed-vec"><div class="inner"><span>opts-slashed-vec</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-opts-vec"><div class="inner"><span>opts-vec</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-pool-datasource"><div class="inner"><span>pool-datasource</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-prep-db"><div class="inner"><span>prep-db</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-print-caches"><div class="inner"><span>print-caches</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-purge-caches"><div class="inner"><span>purge-caches</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-replace.21"><div class="inner"><span>replace!</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-replace-multi.21"><div class="inner"><span>replace-multi!</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-resume-db"><div class="inner"><span>resume-db</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-resume-pool"><div class="inner"><span>resume-pool</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-rollback.21"><div class="inner"><span>rollback!</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-some-uuid-str"><div class="inner"><span>some-uuid-str</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-suspend-db"><div class="inner"><span>suspend-db</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-suspend-pool"><div class="inner"><span>suspend-pool</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-to-lisp"><div class="inner"><span>to-lisp</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-to-lisp-simple"><div class="inner"><span>to-lisp-simple</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-to-lisp-slashed"><div class="inner"><span>to-lisp-slashed</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-to-snake"><div class="inner"><span>to-snake</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-to-snake-simple"><div class="inner"><span>to-snake-simple</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-to-snake-slashed"><div class="inner"><span>to-snake-slashed</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-try-initialize-db"><div class="inner"><span>try-initialize-db</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-uid-to-id"><div class="inner"><span>uid-to-id</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-uids-to-ids"><div class="inner"><span>uids-to-ids</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-uuidable.3F"><div class="inner"><span>uuidable?</span></div></a></li><li class="depth-1"><a href="amelinium.db.html#var-values-.3F"><div class="inner"><span>values-?</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">amelinium.db</h1><h4 class="added">added in 1.0.0</h4><div class="doc"><div class="markdown"><p>Cross-category databases and generators for Amelinium.</p>
</div></div><div class="public anchor" id="var-as-uuid"><h3>as-uuid</h3><div class="usage"><code>(as-uuid v)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/randomseed-io/amelinium/utils/tree/1.0.0/src/amelinium/db.clj#lines-158">view source</a></div></div><div class="public anchor" id="var-auth"><h3>auth</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/randomseed-io/amelinium/utils/tree/1.0.0/src/amelinium/db.clj#lines-50">view source</a></div></div><div class="public anchor" id="var-braced-.3F"><h3>braced-?</h3><div class="usage"><code>(braced-? coll)</code></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-braced-join-.3F"><h3>braced-join-?</h3><div class="usage"><code>(braced-join-? ids)</code></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-braced-join-col-names"><h3>braced-join-col-names</h3><div class="usage"><code>(braced-join-col-names cols)</code></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-braced-join-col-names-no-conv"><h3>braced-join-col-names-no-conv</h3><div class="usage"><code>(braced-join-col-names-no-conv cols)</code></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-cache-create"><h3>cache-create</h3><div class="usage"><code>(cache-create ttl)</code><code>(cache-create ttl queue-size)</code><code>(cache-create ttl queue-size initial-map)</code></div><div class="doc"><div class="markdown"><p>Creates a cache object of the given TTL and/or queue size. Optionally it can get an initial map of entries. Returns cache object encapsulated in an atom.</p>
</div></div></div><div class="public anchor" id="var-cache-evict.21"><h3>cache-evict!</h3><div class="usage"><code>(cache-evict! cache-atom entry)</code><code>(cache-evict! cache-atom entry &amp; more)</code></div><div class="doc"><div class="markdown"><p>Removes entry or entries from the cache. Returns the updated cache from the atom.</p>
</div></div></div><div class="public anchor" id="var-cache-lookup"><h3>cache-lookup</h3><div class="usage"><code>(cache-lookup cache id)</code><code>(cache-lookup cache id &amp; ids)</code></div><div class="doc"><div class="markdown"><p>Looks for the entry of the given ID in a cache which should be a cache object encapsulated in an atom. For multiple IDs, calls <code>cache-lookup-coll</code>.</p>
</div></div></div><div class="public anchor" id="var-cache-lookup-coll"><h3>cache-lookup-coll</h3><div class="usage"><code>(cache-lookup-coll cache ids)</code></div><div class="doc"><div class="markdown"><p>Looks for a collection of entries identified by the given ID in a cache which should be a cache object encapsulated in an atom. Returns a map with identifiers as keys and values for all found entries. Entries which are missing in the cache are grouped under the <code>false</code> key as a list.</p>
</div></div></div><div class="public anchor" id="var-cache-lookup-email"><h3>cache-lookup-email</h3><div class="usage"><code>(cache-lookup-email cache db id-getter email)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/randomseed-io/amelinium/utils/tree/1.0.0/src/amelinium/db.clj#lines-252">view source</a></div></div><div class="public anchor" id="var-cache-lookup-emails"><h3>cache-lookup-emails</h3><div class="usage"><code>(cache-lookup-emails cache emails)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/randomseed-io/amelinium/utils/tree/1.0.0/src/amelinium/db.clj#lines-257">view source</a></div></div><div class="public anchor" id="var-cache-lookup-uuid"><h3>cache-lookup-uuid</h3><div class="usage"><code>(cache-lookup-uuid cache db id-getter uid)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/randomseed-io/amelinium/utils/tree/1.0.0/src/amelinium/db.clj#lines-200">view source</a></div></div><div class="public anchor" id="var-cache-lookup-uuids"><h3>cache-lookup-uuids</h3><div class="usage"><code>(cache-lookup-uuids cache uids)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/randomseed-io/amelinium/utils/tree/1.0.0/src/amelinium/db.clj#lines-205">view source</a></div></div><div class="public anchor" id="var-cache-prepare"><h3>cache-prepare</h3><div class="usage"><code>(cache-prepare ttl)</code><code>(cache-prepare ttl queue-size)</code><code>(cache-prepare ttl queue-size initial-map)</code></div><div class="doc"><div class="markdown"><p>Prepares a cache object of the given TTL and/or queue size. Optionally it can get an initial map of entries. Returns a cache object.</p>
</div></div></div><div class="public anchor" id="var-cached-setting-del"><h3>cached-setting-del</h3><div class="usage"><code>(cached-setting-del cache deleter db entity-id)</code><code>(cached-setting-del cache deleter db entity-id setting-id)</code><code>(cached-setting-del cache deleter db entity-id setting-id &amp; pairs)</code></div><div class="doc"><div class="markdown"><p>Deletes the cached result of calling the given setting deleter. Purges cache entry after operation succeeded.</p>
</div></div></div><div class="public anchor" id="var-cached-setting-get"><h3>cached-setting-get</h3><div class="usage"><code>(cached-setting-get cache getter db entity-id setting-id)</code><code>(cached-setting-get cache getter db entity-id setting-id &amp; setting-ids)</code></div><div class="doc"><div class="markdown"><p>Gets the cached result of calling the given setting getter. Updates cache when necessary.</p>
</div></div></div><div class="public anchor" id="var-cached-setting-set"><h3>cached-setting-set</h3><div class="usage"><code>(cached-setting-set cache setter db entity-id setting-id value)</code><code>(cached-setting-set cache setter db entity-id setting-id value &amp; pairs)</code></div><div class="doc"><div class="markdown"><p>Sets the cached result of calling the given setting setter. Purges cache entry after operation succeeded.</p>
</div></div></div><div class="public anchor" id="var-caches"><h3>caches</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/randomseed-io/amelinium/utils/tree/1.0.0/src/amelinium/db.clj#lines-52">view source</a></div></div><div class="public anchor" id="var-close.21"><h3>close!</h3><div class="usage"><code>(close! obj)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/randomseed-io/amelinium/utils/tree/1.0.0/src/amelinium/db.clj#lines-477">view source</a></div></div><div class="public anchor" id="var-close-db"><h3>close-db</h3><div class="usage"><code>(close-db k config)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/randomseed-io/amelinium/utils/tree/1.0.0/src/amelinium/db.clj#lines-553">view source</a></div></div><div class="public anchor" id="var-close-mig"><h3>close-mig</h3><div class="usage"><code>(close-mig k config)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/randomseed-io/amelinium/utils/tree/1.0.0/src/amelinium/db.clj#lines-613">view source</a></div></div><div class="public anchor" id="var-close-pool"><h3>close-pool</h3><div class="usage"><code>(close-pool ds)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/randomseed-io/amelinium/utils/tree/1.0.0/src/amelinium/db.clj#lines-498">view source</a></div></div><div class="public anchor" id="var-data-source.3F"><h3>data-source?</h3><div class="usage"><code>(data-source? v)</code></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-db-config.3F"><h3>db-config?</h3><div class="usage"><code>(db-config? v)</code></div><div class="doc"><div class="markdown"><p>Returns true if a value of the given argument is an instance of DBConfig record type.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/amelinium/utils/tree/1.0.0/src/amelinium/db.clj#lines-286">view source</a></div></div><div class="public anchor" id="var-db-key-name"><h3>db-key-name</h3><div class="usage"><code>(db-key-name v)</code><code>(db-key-name v &amp; more)</code></div><div class="doc"><div class="markdown"><p>Obtains the database (data source) key name from the given configuration data structure by using known patterns.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/amelinium/utils/tree/1.0.0/src/amelinium/db.clj#lines-345">view source</a></div></div><div class="public anchor" id="var-db-name"><h3>db-name</h3><div class="usage"><code>(db-name v)</code><code>(db-name v &amp; more)</code></div><div class="doc"><div class="markdown"><p>Obtains the database (data source) name from the given configuration data structure by using known patterns.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/amelinium/utils/tree/1.0.0/src/amelinium/db.clj#lines-332">view source</a></div></div><div class="public anchor" id="var-dbname-finder"><h3>dbname-finder</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/randomseed-io/amelinium/utils/tree/1.0.0/src/amelinium/db.clj#lines-314">view source</a></div></div><div class="public anchor" id="var-dbname-key-finder"><h3>dbname-key-finder</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/randomseed-io/amelinium/utils/tree/1.0.0/src/amelinium/db.clj#lines-300">view source</a></div></div><div class="public anchor" id="var-default-reporter"><h3>default-reporter</h3><div class="usage"><code>(default-reporter db-k-name ds op id)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/randomseed-io/amelinium/utils/tree/1.0.0/src/amelinium/db.clj#lines-579">view source</a></div></div><div class="public anchor" id="var-ds"><h3>ds</h3><div class="usage"><code>(ds v)</code></div><div class="doc"><div class="markdown"><p>Gets the data source from the DBConfig record. If the given argument is not an instance of DBConfig, it simply returns it.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/amelinium/utils/tree/1.0.0/src/amelinium/db.clj#lines-292">view source</a></div></div><div class="public anchor" id="var-email-to-id"><h3>email-to-id</h3><div class="usage"><code>(email-to-id db cache getter email)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/randomseed-io/amelinium/utils/tree/1.0.0/src/amelinium/db.clj#lines-268">view source</a></div></div><div class="public anchor" id="var-emails-to-ids"><h3>emails-to-ids</h3><div class="usage"><code>(emails-to-ids db cache getter emails)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/randomseed-io/amelinium/utils/tree/1.0.0/src/amelinium/db.clj#lines-272">view source</a></div></div><div class="public anchor" id="var-for-insert-multi-or"><h3>for-insert-multi-or</h3><div class="usage"><code>(for-insert-multi-or table cols rows opts)</code></div><div class="doc"><div class="markdown"><p>Given a table name, a vector of column names, and a vector of row values (each row is a vector of its values), return a vector of the full <code>INSERT</code> SQL string and its parameters.  Applies any <code>:table-fn</code> / <code>:column-fn</code> supplied in the options.  If <code>:suffix</code> is provided in <code>opts</code>, that string is appended to the <code>INSERT IGNORE ...</code> statement. The <code>IGNORE</code> part can be replaced by supplying :alt-clause option key.</p>
</div></div></div><div class="public anchor" id="var-for-insert-or"><h3>for-insert-or</h3><div class="usage"><code>(for-insert-or table key-map opts)</code></div><div class="doc"><div class="markdown"><p>Given a table name and a hash map of column names and their values, return a vector of the full <code>INSERT OR IGNORE</code> SQL string and its parameters. Applies any <code>:table-fn</code> / <code>:column-fn</code> supplied in the options.  If <code>:suffix</code> is provided in <code>opts</code>, that string is appended to the <code>INSERT ...</code> statement. If <code>:alt-clause</code> is provided in <code>opts</code>, it will replace the default IGNORE string.</p>
</div></div></div><div class="public anchor" id="var-for-replace"><h3>for-replace</h3><div class="usage"><code>(for-replace table key-map opts)</code></div><div class="doc"><div class="markdown"><p>Given a table name and a hash map of column names and their values, return a vector of the full <code>REPLACE</code> SQL string and its parameters. Applies any <code>:table-fn</code> / <code>:column-fn</code> supplied in the options.  If <code>:suffix</code> is provided in <code>opts</code>, that string is appended to the <code>INSERT ...</code> statement.</p>
</div></div></div><div class="public anchor" id="var-for-replace-multi"><h3>for-replace-multi</h3><div class="usage"><code>(for-replace-multi table cols rows opts)</code></div><div class="doc"><div class="markdown"><p>Given a table name, a vector of column names, and a vector of row values (each row is a vector of its values), return a vector of the full <code>REPLACE</code> SQL string and its parameters.  Applies any <code>:table-fn</code> / <code>:column-fn</code> supplied in the options.  If <code>:suffix</code> is provided in <code>opts</code>, that string is appended to the <code>REPLACE ...</code> statement.</p>
</div></div></div><div class="public anchor" id="var-get-cached"><h3>get-cached</h3><div class="usage"><code>(get-cached cache db-getter db id)</code><code>(get-cached cache db-getter db id &amp; more)</code><code>(get-cached cache table db id)</code><code>(get-cached cache table db id &amp; more)</code><code>(get-cached cache table db-getter db id)</code><code>(get-cached cache table db-getter db id &amp; more)</code></div><div class="doc"><div class="markdown"><p>Returns a (possibly cached) sequence of maps requested using db-getter for the given IDs. A database connection and a table name can be passed to be used with the standard get-id getter function instead. When multiple IDs are given, calls get-cached-coll.</p>
</div></div></div><div class="public anchor" id="var-get-cached-coll"><h3>get-cached-coll</h3><div class="usage"><code>(get-cached-coll cache db-getter db ids)</code><code>(get-cached-coll cache table db ids)</code><code>(get-cached-coll cache table db-getter db ids)</code></div><div class="doc"><div class="markdown"><p>Returns a (possibly cached) sequence of maps requested using db-getter for the given IDs. When called with a table name it will be passed as a second argument to the given getter function. When no getter is given the standard one (get-ids) is used. Use make-getter-coll to create getter (with or without predefined table name).</p>
</div></div></div><div class="public anchor" id="var-get-cached-coll-prop"><h3>get-cached-coll-prop</h3><div class="usage"><code>(get-cached-coll-prop cache db-getter db property ids)</code><code>(get-cached-coll-prop cache table db property ids)</code><code>(get-cached-coll-prop cache table db-getter db property ids)</code></div><div class="doc"><div class="markdown"><p>Uses get-cached-coll to retrieve a map with keys being IDs and values being requested properties. If there is no data for the given ID, corresponding entry is not added to the resulting map. If the property does not exist, nil is added.</p>
</div></div></div><div class="public anchor" id="var-get-cached-prop"><h3>get-cached-prop</h3><div class="usage"><code>(get-cached-prop cache db-getter db property id)</code><code>(get-cached-prop cache db-getter db property id &amp; more)</code><code>(get-cached-prop cache table db property id)</code><code>(get-cached-prop cache table db property id &amp; more)</code><code>(get-cached-prop cache table db-getter db property id)</code><code>(get-cached-prop cache table db-getter db property id &amp; more)</code></div><div class="doc"><div class="markdown"><p>Same as get-cached but retrieves a single property from the result by using the get function. When multiple IDs are given it calls get-cached-coll-prop to handle it.</p>
</div></div></div><div class="public anchor" id="var-get-cached-prop-or-default"><h3>get-cached-prop-or-default</h3><div class="usage"><code>(get-cached-prop-or-default cache db-getter db property default id)</code><code>(get-cached-prop-or-default cache db-getter db property default id &amp; more)</code><code>(get-cached-prop-or-default cache table db property default id)</code><code>(get-cached-prop-or-default cache table db property default id &amp; more)</code><code>(get-cached-prop-or-default cache table db-getter db property default id)</code><code>(get-cached-prop-or-default cache table db-getter db property default id &amp; more)</code></div><div class="doc"><div class="markdown"><p>Same as get-cached-prop but when there is no entry for the given ID, it returns the given default value.</p>
</div></div></div><div class="public anchor" id="var-get-failed.3F"><h3>get-failed?</h3><div class="usage"><code>(get-failed? v)</code></div><div class="doc"><div class="markdown"><p>Returns true if getting from a database failed in post-processing phase (e.g. de-serialization) and the data were broken.</p>
</div></div></div><div class="public anchor" id="var-get-id"><h3>get-id</h3><div class="usage"><code>(get-id db table id)</code><code>(get-id db table id &amp; more)</code></div><div class="doc"><div class="markdown"><p>Gets properties of the given ID from a database table. For multiple IDs, calls get-ids.</p>
</div></div></div><div class="public anchor" id="var-get-id-by-email"><h3>get-id-by-email</h3><div class="usage"><code>(get-id-by-email db query email)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/randomseed-io/amelinium/utils/tree/1.0.0/src/amelinium/db.clj#lines-234">view source</a></div></div><div class="public anchor" id="var-get-id-by-uid"><h3>get-id-by-uid</h3><div class="usage"><code>(get-id-by-uid db query uid)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/randomseed-io/amelinium/utils/tree/1.0.0/src/amelinium/db.clj#lines-167">view source</a></div></div><div class="public anchor" id="var-get-ids"><h3>get-ids</h3><div class="usage"><code>(get-ids db table ids)</code></div><div class="doc"><div class="markdown"><p>Gets a map of ID-to-properties from a database for the given IDs and a table. Assumes each result will be related to a single, unique ID.</p>
</div></div></div><div class="public anchor" id="var-get-ids-by-emails"><h3>get-ids-by-emails</h3><div class="usage"><code>(get-ids-by-emails db query emails)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/randomseed-io/amelinium/utils/tree/1.0.0/src/amelinium/db.clj#lines-240">view source</a></div></div><div class="public anchor" id="var-get-ids-by-uids"><h3>get-ids-by-uids</h3><div class="usage"><code>(get-ids-by-uids db query uids)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/randomseed-io/amelinium/utils/tree/1.0.0/src/amelinium/db.clj#lines-173">view source</a></div></div><div class="public anchor" id="var-id-from-db"><h3>id-from-db</h3><div class="usage"><code>(id-from-db v)</code></div><div class="doc"><div class="markdown"><p>Converts the given ID retrieved from a database to a value suitable to be used in Clojure programs. If <code>v</code> is a number or a keyword, it is returned as is. Otherwise it is converted to a keyword.</p>
</div></div></div><div class="public anchor" id="var-id-to-db"><h3>id-to-db</h3><div class="usage"><code>(id-to-db v)</code></div><div class="doc"><div class="markdown"><p>Converts the given ID to a value suitable to be stored in a database. If <code>v</code> is a number, it is passed as is. Otherwise it is converted to a string.</p>
</div></div></div><div class="public anchor" id="var-init-cache"><h3>init-cache</h3><div class="usage"><code>(init-cache {:keys [size ttl seed]})</code></div><div class="doc"><div class="markdown"><p>Initializes single cache by parsing TTL and queue size.</p>
</div></div></div><div class="public anchor" id="var-init-caches"><h3>init-caches</h3><div class="usage"><code>(init-caches config)</code></div><div class="doc"><div class="markdown"><p>Initializes in-memory caches by resetting atoms associated with cache parameters.</p>
</div></div></div><div class="public anchor" id="var-init-db"><h3>init-db</h3><div class="usage"><code>(init-db k config)</code><code>(init-db k config ds-getter)</code><code>(init-db k config ds-getter ds-closer)</code><code>(init-db k config ds-getter ds-closer ds-suspender)</code><code>(init-db k config ds-getter ds-closer ds-suspender ds-resumer)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/randomseed-io/amelinium/utils/tree/1.0.0/src/amelinium/db.clj#lines-525">view source</a></div></div><div class="public anchor" id="var-init-mig"><h3>init-mig</h3><div class="usage"><code>(init-mig k config)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/randomseed-io/amelinium/utils/tree/1.0.0/src/amelinium/db.clj#lines-594">view source</a></div></div><div class="public anchor" id="var-init-migrators"><h3>init-migrators</h3><div class="usage"><code>(init-migrators config)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/randomseed-io/amelinium/utils/tree/1.0.0/src/amelinium/db.clj#lines-608">view source</a></div></div><div class="public anchor" id="var-insert-multi-or.21"><h3>insert-multi-or!</h3><div class="usage"><code>(insert-multi-or! connectable table cols rows)</code><code>(insert-multi-or! connectable table cols rows opts)</code></div><div class="doc"><div class="markdown"><p>Syntactic sugar over <code>execute!</code> to make inserting columns/rows easier. Same as insert-or! but supports multiple rows to be inserted at once.</p>
</div></div></div><div class="public anchor" id="var-insert-or.21"><h3>insert-or!</h3><div class="usage"><code>(insert-or! connectable table key-map)</code><code>(insert-or! connectable table key-map opts)</code></div><div class="doc"><div class="markdown"><p>Syntactic sugar over <code>execute-one!</code> to make inserting hash maps easier. Given a connectable object, a table name, and a data hash map, inserts the data as a single row in the database and attempts to return a map of generated keys. By default it uses <code>INSERT OR IGNORE</code> but the <code>IGNORE</code> can be changed to anything by supplying :alt-clause option in opts map.</p>
</div></div></div><div class="public anchor" id="var-insert-or-ignore.21"><h3>insert-or-ignore!</h3><div class="usage"><code>(insert-or-ignore! connectable table key-map)</code><code>(insert-or-ignore! connectable table key-map opts)</code></div><div class="doc"><div class="markdown"><p>Syntactic sugar over <code>execute-one!</code> to make inserting hash maps easier. Given a connectable object, a table name, and a data hash map, inserts the data as a single row in the database and attempts to return a map of generated keys.</p>
</div></div></div><div class="public anchor" id="var-insert-or-ignore-multi.21"><h3>insert-or-ignore-multi!</h3><div class="usage"><code>(insert-or-ignore-multi! connectable table cols rows)</code><code>(insert-or-ignore-multi! connectable table cols rows opts)</code></div><div class="doc"><div class="markdown"><p>Syntactic sugar over <code>execute!</code> to make inserting columns/rows easier. Same as insert-multi! but supports :alt-clause option key.</p>
</div></div></div><div class="public anchor" id="var-insert-or-replace.21"><h3>insert-or-replace!</h3><div class="usage"><code>(insert-or-replace! connectable table key-map)</code><code>(insert-or-replace! connectable table key-map opts)</code></div><div class="doc"><div class="markdown"><p>Syntactic sugar over <code>execute-one!</code> to make inserting hash maps easier. Given a connectable object, a table name, and a data hash map, inserts the data as a single row in the database and attempts to return a map of generated keys.</p>
</div></div></div><div class="public anchor" id="var-insert-or-replace-multi.21"><h3>insert-or-replace-multi!</h3><div class="usage"><code>(insert-or-replace-multi! connectable table cols rows)</code><code>(insert-or-replace-multi! connectable table cols rows opts)</code></div><div class="doc"><div class="markdown"><p>Syntactic sugar over <code>execute!</code> to make inserting columns/rows easier. Same as insert-multi! but supports :alt-clause option key.</p>
</div></div></div><div class="public anchor" id="var-invalidate.21"><h3>invalidate!</h3><div class="usage"><code>(invalidate! f key-params)</code></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-invalidator"><h3>invalidator</h3><div class="usage"><code>(invalidator f)</code></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-join-.3F"><h3>join-?</h3><div class="usage"><code>(join-? ids)</code></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-join-col-names"><h3>join-col-names</h3><div class="usage"><code>(join-col-names cols)</code></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-join-v.3D.3F"><h3>join-v=?</h3><div class="usage"><code>(join-v=? ids)</code></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-key-as-ip"><h3>key-as-ip</h3><div class="usage"><code>(key-as-ip m k)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/randomseed-io/amelinium/utils/tree/1.0.0/src/amelinium/db.clj#lines-133">view source</a></div></div><div class="public anchor" id="var-key-as-keyword"><h3>key-as-keyword</h3><div class="usage"><code>(key-as-keyword m k)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/randomseed-io/amelinium/utils/tree/1.0.0/src/amelinium/db.clj#lines-127">view source</a></div></div><div class="public anchor" id="var-key-as-phone"><h3>key-as-phone</h3><div class="usage"><code>(key-as-phone m k)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/randomseed-io/amelinium/utils/tree/1.0.0/src/amelinium/db.clj#lines-143">view source</a></div></div><div class="public anchor" id="var-key-as-uuid"><h3>key-as-uuid</h3><div class="usage"><code>(key-as-uuid m k)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/randomseed-io/amelinium/utils/tree/1.0.0/src/amelinium/db.clj#lines-163">view source</a></div></div><div class="public anchor" id="var-list-caches"><h3>list-caches</h3><div class="usage"><code>(list-caches)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/randomseed-io/amelinium/utils/tree/1.0.0/src/amelinium/db.clj#lines-123">view source</a></div></div><div class="public anchor" id="var-make-deleter"><h3>make-deleter</h3><div class="usage"><code>(make-deleter id-col)</code><code>(make-deleter table id-col)</code></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-make-getter"><h3>make-getter</h3><div class="usage"><code>(make-getter id-col cols)</code><code>(make-getter table id-col cols)</code><code>(make-getter table id-col cols getter-coll-fn)</code></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-make-getter-coll"><h3>make-getter-coll</h3><div class="usage"><code>(make-getter-coll id-col)</code><code>(make-getter-coll id-col cols)</code><code>(make-getter-coll table id-col cols)</code></div><div class="doc"><div class="markdown"><p>Creates a database getter suitable for use with <code>get-cached-coll-</code> family of functions. The returned function should accept an argument containing multiple identifiers.</p>
</div></div></div><div class="public anchor" id="var-make-setter"><h3>make-setter</h3><div class="usage"><code>(make-setter id-col)</code><code>(make-setter table id-col)</code></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-make-setting-deleter"><h3>make-setting-deleter</h3><div class="usage"><code>(make-setting-deleter table entity-column)</code></div><div class="doc"><div class="markdown"><p>Creates a setting deleter on a basis of the given table and entity column.</p>
</div></div></div><div class="public anchor" id="var-make-setting-getter"><h3>make-setting-getter</h3><div class="usage"><code>(make-setting-getter table entity-column)</code></div><div class="doc"><div class="markdown"><p>Returns a function which gets a setting for the given entity and de-serializes it to a Clojure data structure. Table name and entity column name must be quoted if needed before passing to this function.</p>
</div></div></div><div class="public anchor" id="var-make-setting-setter"><h3>make-setting-setter</h3><div class="usage"><code>(make-setting-setter table entity-column)</code></div><div class="doc"><div class="markdown"><p>Returns a function which stores one or more settings for a given entity in a database. Max. object size is 32 KB. Table name and entity column name must be quoted if needed before passing to this function.</p>
</div></div></div><div class="public anchor" id="var-mem-assoc-existing.21"><h3>mem-assoc-existing!</h3><div class="usage"><code>(mem-assoc-existing! f key k v)</code><code>(mem-assoc-existing! f key k v &amp; kvs)</code></div><div class="doc"><div class="markdown"><p>Set a key <code>k</code> to a value <code>v</code> in a map being a cached result of prior calling memoized function <code>f</code>. Will not associate anything if the destination does not exist. The caching key should be given as a <code>key</code> vector.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/amelinium/utils/tree/1.0.0/src/amelinium/db.clj#lines-185">view source</a></div></div><div class="public anchor" id="var-memoize"><h3>memoize</h3><div class="usage"><code>(memoize f)</code><code>(memoize f queue-size)</code><code>(memoize f queue-size ttl)</code></div><div class="doc"><div class="markdown"><p>Creates memoized version of a database accessing or other function. With only 1 argument defaults to a FIFO cache with length of 256 and TTL cache with expiration of 150 seconds. When 2 arguments are given it only creates FIFO cache of the given length, without TTL. When <code>queue-size</code> is <code>nil</code> or &lt;= 0, the FIFO cache will not be created. When <code>ttl</code> is <code>nil</code> or &lt;= 0, the TTL cache will not be created.</p>
</div></div></div><div class="public anchor" id="var-memoizer"><h3>memoizer</h3><div class="usage"><code>(memoizer config)</code><code>(memoizer f config)</code></div><div class="doc"><div class="markdown"><p>Creates a memoized functions with predefined TTL and queue size taken from config. If the function is not given it will try to dereference symbol present in the config under the <code>:memoizer</code> key. Uses <code>io.randomseed.utils.db/memoize</code> to initialize caches.</p>
</div></div></div><div class="public anchor" id="var-migrate.21"><h3>migrate!</h3><div class="usage"><code>(migrate!)</code><code>(migrate! opts)</code></div><div class="doc"><div class="markdown"><p>Migrates all databases (or a database specified by a migrator function passed as an argument) up to the latest migration. Optional map of options can be passed which will be merged with each migration options.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/amelinium/utils/tree/1.0.0/src/amelinium/db.clj#lines-402">view source</a></div></div><div class="public anchor" id="var-migration"><h3>migration</h3><div class="usage"><code>(migration migrator-obj)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/randomseed-io/amelinium/utils/tree/1.0.0/src/amelinium/db.clj#lines-364">view source</a></div></div><div class="public anchor" id="var-migration-databases"><h3>migration-databases</h3><div class="usage"><code>(migration-databases config)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/randomseed-io/amelinium/utils/tree/1.0.0/src/amelinium/db.clj#lines-381">view source</a></div></div><div class="public anchor" id="var-migration-index"><h3>migration-index</h3><div class="usage"><code>(migration-index)</code></div><div class="doc"><div class="markdown"><p>Gets a current value of ragtime-repl/migration-indexes.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/amelinium/utils/tree/1.0.0/src/amelinium/db.clj#lines-466">view source</a></div></div><div class="public anchor" id="var-migrations"><h3>migrations</h3><div class="usage"><code>(migrations)</code><code>(migrations migrators-vec)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/randomseed-io/amelinium/utils/tree/1.0.0/src/amelinium/db.clj#lines-368">view source</a></div></div><div class="public anchor" id="var-migrator-config"><h3>migrator-config</h3><div class="usage"><code>(migrator-config config loader migration-dir)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/randomseed-io/amelinium/utils/tree/1.0.0/src/amelinium/db.clj#lines-585">view source</a></div></div><div class="public anchor" id="var-migrators"><h3>migrators</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/randomseed-io/amelinium/utils/tree/1.0.0/src/amelinium/db.clj#lines-51">view source</a></div></div><div class="public anchor" id="var-opts-map"><h3>opts-map</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-opts-simple-map"><h3>opts-simple-map</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-opts-simple-vec"><h3>opts-simple-vec</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-opts-slashed-map"><h3>opts-slashed-map</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-opts-slashed-vec"><h3>opts-slashed-vec</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-opts-vec"><h3>opts-vec</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-pool-datasource"><h3>pool-datasource</h3><div class="usage"><code>(pool-datasource db-props)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/randomseed-io/amelinium/utils/tree/1.0.0/src/amelinium/db.clj#lines-490">view source</a></div></div><div class="public anchor" id="var-prep-db"><h3>prep-db</h3><div class="usage"><code>(prep-db config)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/randomseed-io/amelinium/utils/tree/1.0.0/src/amelinium/db.clj#lines-513">view source</a></div></div><div class="public anchor" id="var-print-caches"><h3>print-caches</h3><div class="usage"><code>(print-caches)</code><code>(print-caches caches-obj)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/randomseed-io/amelinium/utils/tree/1.0.0/src/amelinium/db.clj#lines-119">view source</a></div></div><div class="public anchor" id="var-purge-caches"><h3>purge-caches</h3><div class="usage"><code>(purge-caches config)</code></div><div class="doc"><div class="markdown"><p>Removes everything from caches.</p>
</div></div></div><div class="public anchor" id="var-replace.21"><h3>replace!</h3><div class="usage"><code>(replace! connectable table key-map)</code><code>(replace! connectable table key-map opts)</code></div><div class="doc"><div class="markdown"><p>Syntactic sugar over <code>execute-one!</code> to make inserting hash maps easier. Given a connectable object, a table name, and a data hash map, inserts the data as a single row in the database and attempts to return a map of generated keys. By default it uses <code>REPLACE</code>.</p>
</div></div></div><div class="public anchor" id="var-replace-multi.21"><h3>replace-multi!</h3><div class="usage"><code>(replace-multi! connectable table cols rows)</code><code>(replace-multi! connectable table cols rows opts)</code></div><div class="doc"><div class="markdown"><p>Syntactic sugar over <code>execute!</code> to make inserting columns/rows easier. Same as replace! but supports multiple rows to be inserted at once.</p>
</div></div></div><div class="public anchor" id="var-resume-db"><h3>resume-db</h3><div class="usage"><code>(resume-db k config old-config old-impl)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/randomseed-io/amelinium/utils/tree/1.0.0/src/amelinium/db.clj#lines-570">view source</a></div></div><div class="public anchor" id="var-resume-pool"><h3>resume-pool</h3><div class="usage"><code>(resume-pool ds)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/randomseed-io/amelinium/utils/tree/1.0.0/src/amelinium/db.clj#lines-506">view source</a></div></div><div class="public anchor" id="var-rollback.21"><h3>rollback!</h3><div class="usage"><code>(rollback!)</code><code>(rollback! opts)</code><code>(rollback! opts amount-or-id)</code></div><div class="doc"><div class="markdown"><p>Rolls back all databases or a database specified by a migrator function passed as an argument. Optional map of options can be passed which will be merged with each migration options. If a value is passed instead of a map or a function it will be used as an additional argument meaning a number of migrations or a migration ID.</p>
</div></div><div class="src-link"><a href="https://github.com/randomseed-io/amelinium/utils/tree/1.0.0/src/amelinium/db.clj#lines-429">view source</a></div></div><div class="public anchor" id="var-some-uuid-str"><h3>some-uuid-str</h3><div class="usage"><code>(some-uuid-str s)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/randomseed-io/amelinium/utils/tree/1.0.0/src/amelinium/db.clj#lines-149">view source</a></div></div><div class="public anchor" id="var-suspend-db"><h3>suspend-db</h3><div class="usage"><code>(suspend-db k config)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/randomseed-io/amelinium/utils/tree/1.0.0/src/amelinium/db.clj#lines-562">view source</a></div></div><div class="public anchor" id="var-suspend-pool"><h3>suspend-pool</h3><div class="usage"><code>(suspend-pool ds)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/randomseed-io/amelinium/utils/tree/1.0.0/src/amelinium/db.clj#lines-502">view source</a></div></div><div class="public anchor" id="var-to-lisp"><h3>to-lisp</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-to-lisp-simple"><h3>to-lisp-simple</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-to-lisp-slashed"><h3>to-lisp-slashed</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-to-snake"><h3>to-snake</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-to-snake-simple"><h3>to-snake-simple</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-to-snake-slashed"><h3>to-snake-slashed</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-try-initialize-db"><h3>try-initialize-db</h3><div class="usage"><code>(try-initialize-db config)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/randomseed-io/amelinium/utils/tree/1.0.0/src/amelinium/db.clj#lines-374">view source</a></div></div><div class="public anchor" id="var-uid-to-id"><h3>uid-to-id</h3><div class="usage"><code>(uid-to-id db cache getter uid)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/randomseed-io/amelinium/utils/tree/1.0.0/src/amelinium/db.clj#lines-216">view source</a></div></div><div class="public anchor" id="var-uids-to-ids"><h3>uids-to-ids</h3><div class="usage"><code>(uids-to-ids db cache getter uids)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/randomseed-io/amelinium/utils/tree/1.0.0/src/amelinium/db.clj#lines-220">view source</a></div></div><div class="public anchor" id="var-uuidable.3F"><h3>uuidable?</h3><div class="usage"><code>(uuidable? v)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/randomseed-io/amelinium/utils/tree/1.0.0/src/amelinium/db.clj#lines-154">view source</a></div></div><div class="public anchor" id="var-values-.3F"><h3>values-?</h3><div class="usage"><code>(values-? coll)</code></div><div class="doc"><div class="markdown"></div></div></div></div></body></html>