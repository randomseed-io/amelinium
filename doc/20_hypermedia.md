# Hypermedia-driven

Amelinium is made with **[hypermedia][HATEOAS]** in mind. Therefore, it supports
[RESTful][REST] and [document-oriented][HS] architecture, in which a dynamic HTML
content is generated by the HTTP server and rendered by the browser. Thanks to
**[HTMX][HTMX]** JavaScript library, user interaction is possible without reloading
the whole document and without visiting multiple web pages.

HTMX integration is not enforced. It is possible to use multi-page approach based on
redirects and regular links. Amelinium dynamically detects if it can make use of
HTMX. It can also be instructed in route configuration to use or not to use HTMX and
skip the dynamic detection.

## Model, layout, view, controller

Client-server architecture and resources organization is similar to [JSP model 2][Model-2]
architecture.

1. Requests from the browser are passed via a **middleware** chain to the
   **controller**, a function assigned to a certain HTTP route in server's
   configuration.

2. The controller performs any logic necessary to obtain the correct content for
   display.

3. To get current state of application for a user (including session-related
   information), controller may call functions from **models** to access required
   data sources.

4. Results of controller's work are stored in a map as associations. Entries may
   contain regular values or lazily evaluated `Delay` objects. On a basis of route
   configuration and/or controller's logic names of **layout** and **view** are set.

5. Common controller takes over the control and it tries to find layout and view for
   the language detected by middleware and/or controller.

6. Using layout and view HTML document is rendered in a context of all values set in
   a map from point 4.

7. The result of rendering the HTML document is returned to the browser to be
   displayed.

[HS]:         https://hypermedia.systems/book/hypermedia-systems/
[HTMX]:       https://htmx.org/
[HATEOAS]:    https://en.wikipedia.org/wiki/HATEOAS
[REST]:       https://en.wikipedia.org/wiki/Representational_state_transfer
[Model-2]:    https://en.wikipedia.org/wiki/JSP_model_2_architecture
[LICENSE]:    https://github.com/randomseed-io/amelinium/blob/master/LICENSE
